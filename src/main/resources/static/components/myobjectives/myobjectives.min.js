function addObjectiveToDB(a,b,c,d,e){$.ajax({url:"http://"+getEnvironment()+":8080/addObjective/"+a,method:"POST",xhrFields:{withCredentials:!0},data:{title:b,description:c,completedBy:d,proposedBy:e},success:function(a){0==lastObjID&&$("#all-obj").removeClass("text-center").empty(),addObjectiveToList(++lastObjID,b,c,formatDate(d),0,!1,getADfullName()),showProposedObjTab(),toastr.success(a)},error:function(a,b,c){toastr.error(a.responseText)}})}function editObjectiveOnDB(a,b,c,d,e,f,g){$.ajax({url:"http://"+getEnvironment()+":8080/editObjective/"+a,method:"POST",xhrFields:{withCredentials:!0},data:{objectiveID:b,title:c,description:d,completedBy:e,progress:f,proposedBy:g},success:function(g){editObjectiveOnList(a,b,c,d,e,f),toastr.success(g)},error:function(a,b,c){toastr.error(a.responseText)}})}function editObjectiveProgressOnDB(a,b,c){$.ajax({url:"http://"+getEnvironment()+":8080/editObjectiveProgress/"+a,method:"POST",xhrFields:{withCredentials:!0},data:{objectiveID:b,progress:c},success:function(a){updateObjectiveStatusOnList(b,c),toastr.success(a)},error:function(a,b,c){toastr.error(a.responseText)}})}function openAddObjectiveModal(){$("#obj-modal-type").val("add"),setObjectiveModalContent("","","",getToday(),0,0),showObjectiveModal(!0)}function openEditObjectiveModal(a){$("#obj-modal-type").val("edit");var b=a,c=$("#obj-title-"+a).text().trim(),d=$("#obj-text-"+a).text().trim(),e=$("#obj-date-"+a).text().trim(),f=$("#obj-status-"+a).val();e=reverseDateFormat(e),setObjectiveModalContent(b,c,d,e,f,1),showObjectiveModal(!0)}function addObjectiveToList(a,b,c,d,e,f,g){f===!0||"true"===f?$("#obj-archived").append(objectiveListHTML(a,b,c,d,e,f,g)):$("#all-obj").append(objectiveListHTML(a,b,c,d,e,f,g))}function editObjectiveOnList(a,b,c,d,e,f){$("#obj-title-"+b).text(c),$("#obj-text-"+b).text(d),$("#obj-date-"+b).text("").append('<h6 class="pull-right"><b>'+formatDate(e)+"</b></h6>"),$("#obj-status-"+b).val(f)}function clickArchiveObjective(a,b){$("#obj-is-archived-"+a).val(b),editObjectiveArchiveOnDB(a,b)}function editObjectiveArchiveOnDB(a,b){$.ajax({url:"http://"+getEnvironment()+":8080/changeStatusObjective/"+getADLoginID(),method:"POST",xhrFields:{withCredentials:!0},data:{objectiveID:a,isArchived:b},success:function(c){updateObjectiveList(a),b||updateArchiveTab(),toastr.success(c)},error:function(a,b,c){toastr.error(a.responseText)}})}function updateObjectiveList(a){var b=$("#obj-title-"+a).text(),c=$("#obj-text-"+a).text(),d=$("#obj-date-"+a).text(),e=$("#obj-status-"+a).val(),f=$("#obj-is-archived-"+a).val(),g=$("#obj-proposedBy-"+a).text();$("#objective-item-"+a).fadeOut(400,function(){$(this).remove()}),addObjectiveToList(a,b,c,d,e,f,g)}function clickObjectiveFeedback(a){window.location.replace("http://"+getEnvironment()+"/mycareer/feedback")}function updateObjectiveStatusOnDB(a,b){if("true"===$("#obj-is-archived-"+a).val()||1==$("#obj-is-archived-"+a).val()||b===parseInt($("#obj-status-"+a).val()))return!1;var c=getADLoginID();editObjectiveProgressOnDB(c,a,b)}function updateObjectiveStatusOnList(a,b){switch($("#obj-status-"+a).val(b),parseInt(b)){case 0:$("#started-obj-dot-"+a).removeClass("complete"),$("#complete-obj-dot-"+a).removeClass("complete");break;case 1:$("#started-obj-dot-"+a).addClass("complete"),$("#complete-obj-dot-"+a).removeClass("complete");break;case 2:$("#started-obj-dot-"+a).addClass("complete"),$("#complete-obj-dot-"+a).addClass("complete")}$("#obj-all-tab").hasClass("active")||$("#objective-item-"+a).fadeOut(),$("#objective-item-"+a).removeClass("proposed started completed"),$("#objective-item-"+a).addClass(statusList[parseInt(b)])}function updateArchiveTab(){$(".panel-group").each(function(){$(this).hasClass("archived-obj-item")?$(this).addClass("active in"):$(this).removeClass("active in")})}function isArchivedItem(a){return 1==a||"true"===a?"archived-obj-item":"unarchived-obj-item"}function objectiveListHTML(a,b,c,d,e,f,g){var h="     <div class='panel-group tab-pane fade "+isArchivedItem(f)+" "+statusList[e]+" active in' id='objective-item-"+a+"'>         <div class='panel panel-default' id='panel'>         <input type='hidden' id='obj-status-"+a+"' value='"+e+"'>         <input type='hidden' id='obj-is-archived-"+a+"' value='"+f+"'>         \t<div class='panel-heading'>             \t<div class='row'>             \t\t<div class='col-sm-6'> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-6' id='obj-no-"+a+"'><h6><b>#"+a+"</b></h6></div> \t\t            \t\t<div class='col-sm-6' id='obj-date-"+a+"'><h6 class='pull-right'><b>"+d+"</b></h6></div> \t            \t\t</div> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-12 wrap-text' id='obj-title-"+a+"'>"+b+"</div> \t            \t\t</div>             \t\t</div>             \t\t<div class='col-sm-5 bs-wizard'>             \t\t\t <div class='col-xs-4 bs-wizard-step complete' id='proposed-obj-dot-"+a+"' onClick='updateObjectiveStatusOnDB("+a+", 0)'> \t\t\t\t\t      <div class='text-center progress-link' style='cursor:pointer'><h6>Proposed</h6></div> \t\t\t\t\t      <div  class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step "+checkComplete(e,1)+"' id='started-obj-dot-"+a+"' onClick='updateObjectiveStatusOnDB("+a+", 1)'> \t\t\t\t\t       <div class='text-center progress-link' style='cursor:pointer'><h6>In-Progress</h6></div> \t\t\t\t\t       <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t       <div  class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t       <div  class='bs-wizard-dot-complete' style='cursor:pointer'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step  "+checkComplete(e,2)+"' id='complete-obj-dot-"+a+"' onClick='updateObjectiveStatusOnDB("+a+", 2)'> \t\t\t\t\t       <div class='text-center progress-link' style='cursor:pointer'><h6>Complete</h6></div> \t\t\t\t\t       \t <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t        <div class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t        <div  class='bs-wizard-dot-complete' style='cursor:pointer'></div> \t\t\t\t\t     </div>             \t\t</div>             \t\t<div class='col-sm-1 chev-height'> \t\t\t\t\t  <a data-toggle='collapse' href='#collapse-obj-"+a+"' class='collapsed'></a> \t\t\t\t\t</div>             \t</div>             </div>                     <div id='collapse-obj-"+a+"' class='panel-collapse collapse'>                     <div class='panel-body'>                     <div class='row'>                         <div class='col-md-4'>                             <h5><b>Description</b></h5>                         </div>                         <div class='col-md-3'>                         </div>                         <div class='col-md-5 pull-right'>                             <h6><b>Proposed by: </b><span id='obj-proposedBy-"+a+"'>"+g+"</span></h6>                         </div>                     </div>                     <div class='row'>                         <div class='col-md-12 wrap-text'>                             <p id='obj-text-"+a+"'>"+c+"</p>                         </div>                     </div>                     "+objectivesButtonsHTML(a,f);return h}function objectivesButtonsHTML(a,b){var c="     <div class='col-md-12'> \t\t<div class='col-sm-6'>         \t<button type='button' class='btn btn-block btn-default pull-left'  onClick='clickArchiveObjective("+a+", true)' id='archive-obj'>Archive</button>         </div>         <div class=' col-sm-6'>         \t<button type='button' class='btn btn-block btn-default' onClick='openEditObjectiveModal("+a+")'>Edit</button>         </div>     </div> ";if(b===!0||"true"===b){var d=" \t\t    <div class='col-md-12'> \t\t        <div class=' col-sm-6 pull-right'> \t\t        \t<button type='button' class='btn btn-block btn-default pull-left'  onClick='clickArchiveObjective("+a+", false)' id='archive-obj'>Restore</button> \t\t        </div> \t\t    </div> \t\t";return d}return c}$(function(){getObjectivesList(getADLoginID()),$("#competencies").load("../components/myobjectives/competencies/competencies.html"),$("#add-obj").click(function(){openAddObjectiveModal()}),$("#navTab").click(function(){}),$("#obj-all-tab").click(function(){$(".unarchived-obj-item").css("display","")}),$("#obj-proposed-tab").click(function(){$(".proposed").css({display:""})}),$("#obj-started-tab").click(function(){$(".started").css({display:""})}),$("#obj-completed-tab").click(function(){$(".completed").css({display:""})})});