function verifyUser(){"false"!==userHasHrDash()&&0!=userHasHrDash()||(window.location="/myobjectives")}function getMyCareerStats(){$.ajax({url:"http://"+getEnvironment()+":8080/hr/getMyCareerStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){addHrDataToList(a.totalAccounts,a.usersWithObjectives,a.usersWithDevNeeds,a.usersWithNotes,a.usersWithCompetencies,a.usersWithFeedbackRequests,a.usersWithFeedback)},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting HR data, please try again later.")}})}function getEmployeeStats(){$.ajax({url:"http://"+getEnvironment()+":8080/hr/getEmployeeStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){$(".hr-dashboard").append(hrEmployeeHeader()),$.each(a,function(a,b){if("Never"===b.lastLogon)var c=b.lastLogon;else var c=timeStampToLongDate(b.lastLogon);addHrEmployeeToList(b.employeeID,b.fullName,b.company,b.superSector,b.department,c)})},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting HR Employee data, please try again later.")}})}function getHRObjectivesStats(){$.ajax({url:"http://"+getEnvironment()+":8080/hr/getObjectiveStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){$(".hr-dashboard").append(hrObjectivesHeader()),$.each(a,function(a,b){addHrObjectivesToList(b.employeeID,b.fullName,b.totalObjectives,b.proposed,b.inProgress,b.complete,b.company,b.superSector,b.department)})},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting HR Objective data, please try again later.")}})}function getHRDevNeedsStats(){$.ajax({url:"http://"+getEnvironment()+":8080/hr/getDevelopmentNeedStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){$(".hr-dashboard").append(hrDevNeedsHeader()),$.each(a,function(a,b){addHrDevelopmentNeedsToList(b.employeeID,b.fullName,b.totalDevelopmentNeeds,b.proposed,b.inProgress,b.complete,b.company,b.superSector,b.department)})},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting HR Development Needs overview data, please try again later.")}})}function getHRDevNeedBreakdown(){$.ajax({url:"http://"+getEnvironment()+":8080/hr/getDevelopmentNeedBreakDown",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){$(".hr-dashboard").append(hrDevNeedsBreakdownHeader()),$.each(a,function(a,b){addHrDevelopmentNeedsBreakdownToList(b.employeeID,b.fullName,b.title,b.category,b.company,b.superSector,b.department)})},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting HR Development Needs breakdown data, please try again later.")}})}function getHRFeedbackStats(){$.ajax({url:"http://"+getEnvironment()+":8080/hr/getFeedbackStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){$(".hr-dashboard").append(hrFeedbackHeader()),$.each(a,function(a,b){addHrFeedbackToList(b.employeeID,b.fullName,b.totalFeedback,b.company,b.superSector,b.department)})},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting HR Feedback data, please try again later.")}})}function getHRSuperSectorStats(){$.ajax({url:"http://"+getEnvironment()+":8080/hr/getSectorBreakDown",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){$(".hr-dashboard").append(hrSuperSectorHeader()),$.each(a,function(a,b){addHrSuperSectorToList(b.sector,b.employees,b.noWithObjs,b.noWithDevNeeds,b.percentObjs,b.percentDevNeeds)})},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting HR Super Sector data, please try again later.")}})}function addHrDataToList(a,b,c,d,e,f,g){$(".hr-dashboard").append(hrOverviewList(a,b,c,d,e,f,g))}function showHrOverviewList(){$("#hrOverviewTable").hasClass("hidden")&&$("#hrOverviewTable").removeClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrOverviewList(a,b,c,d,e,f,g){var h="     <table class='table table-striped hidden' id='hrOverviewTable'>         <thead>             <tr>                <th>Overview of MyCareer</th>     \t       <th>Number of Users</th>             </tr>         </thead>         <tbody>             <tr>                 <td>Total Accounts Accessed</td>                 <td>"+a+"</td>             </tr>             <tr>                 <td>Users with at least one objective</td>                 <td>"+b+"</td>             </tr>             <tr>                 <td>Users with at least one development need</td>                 <td>"+c+"</td>             </tr>             <tr>                 <td>Users with at least one note</td>                 <td>"+d+"</td>             </tr>             <tr>                 <td>Users that have clicked a competency</td>                 <td>"+e+"</td>             </tr>             <tr>                 <td>Users that have submitted a feedback request</td>                 <td>"+f+"</td>             </tr>             <tr>                 <td>Users that have received feedback</td>                 <td>"+g+"</td>             </tr>         </tbody>     </table>     ";return h}function addHrEmployeeToList(a,b,c,d,e,f){$("#employeeDetails").append(hrEmployeeList(a,b,c,d,e,f))}function showHrEmployeeList(){$("#hrEmployeeTable").hasClass("hidden")&&$("#hrEmployeeTable").removeClass("hidden"),$("#hrEmployeeTable_wrapper").hasClass("hidden")&&$("#hrEmployeeTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrEmployeeHeader(){var a="         <table class='table table-striped hidden' id='hrEmployeeTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                    <th>Last Logged On</th>                 </tr>             </thead>             <tbody id='employeeDetails'>             </tbody>         </table>     ";return a}function hrEmployeeList(a,b,c,d,e,f){var g="             <tr>                 <td>"+a+"</td>                 <td>"+b+"</td>                 <td>"+c+"</td>                 <td>"+d+"</td>                 <td>"+e+"</td>                 <td>"+f+"</td>             </tr>     ";return g}function addHrObjectivesToList(a,b,c,d,e,f,g,h,i){$("#objectiveDetails").append(hrObjectivesList(a,b,c,d,e,f,g,h,i))}function showHrObjectivesList(){$("#hrObjectivesTable").hasClass("hidden")&&$("#hrObjectivesTable").removeClass("hidden"),$("#hrObjectivesTable_wrapper").hasClass("hidden")&&$("#hrObjectivesTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrObjectivesHeader(){var a="         <table class='table table-striped hidden' id='hrObjectivesTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Total no of Objectives</th>                    <th>Objectives Proposed</th>                    <th>Objectives In-Progress</th>                    <th>Objectives Complete</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                 </tr>             </thead>             <tbody id='objectiveDetails'>             </tbody>         </table>     ";return a}function hrObjectivesList(a,b,c,d,e,f,g,h,i){var j="             <tr>                 <td>"+a+"</td>                 <td>"+b+"</td>                 <td>"+c+"</td>                 <td>"+d+"</td>                 <td>"+e+"</td>                 <td>"+f+"</td>                 <td>"+g+"</td>                 <td>"+h+"</td>                 <td>"+i+"</td>             </tr>     ";return j}function addHrDevelopmentNeedsToList(a,b,c,d,e,f,g,h,i){$("#devNeedsDetails").append(hrDevelopmentNeedsList(a,b,c,d,e,f,g,h,i))}function addHrDevelopmentNeedsBreakdownToList(a,b,c,d,e,f,g){$("#devNeedsBreakdownDetails").append(hrDevelopmentNeedsBreakdownList(a,b,c,d,e,f,g))}function showHrDevelopmentNeedsList(){$("#hrDevNeedsTable").hasClass("hidden")&&$("#hrDevNeedsTable").removeClass("hidden"),$("#hrDevNeedsTable_wrapper").hasClass("hidden")&&$("#hrDevNeedsTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function showHrDevelopmentNeedsBreakdownList(){$("#hrDevNeedsBreakdownTable").hasClass("hidden")&&$("#hrDevNeedsBreakdownTable").removeClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").hasClass("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrDevNeedsHeader(){var a="         <table class='table table-striped hidden' id='hrDevNeedsTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Total no of Development Needs</th>                    <th>Development Needs Proposed</th>                    <th>Development Needs In-Progress</th>                    <th>Development Needs Complete</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                 </tr>             </thead>             <tbody id='devNeedsDetails'>             </tbody>         </table>     ";return a}function hrDevNeedsBreakdownHeader(){var a="         <table class='table table-striped hidden' id='hrDevNeedsBreakdownTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Title</th>                    <th>Category</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                 </tr>             </thead>             <tbody id='devNeedsBreakdownDetails'>             </tbody>         </table>     ";return a}function hrDevelopmentNeedsList(a,b,c,d,e,f,g,h,i){var j="             <tr>                 <td>"+a+"</td>                 <td>"+b+"</td>                 <td>"+c+"</td>                 <td>"+d+"</td>                 <td>"+e+"</td>                 <td>"+f+"</td>                 <td>"+g+"</td>                 <td>"+h+"</td>                 <td>"+i+"</td>             </tr>     ";return j}function hrDevelopmentNeedsBreakdownList(a,b,c,d,e,f,g){var h="             <tr>                 <td>"+a+"</td>                 <td>"+b+"</td>                 <td>"+c+"</td>                 <td>"+d+"</td>                 <td>"+e+"</td>                 <td>"+f+"</td>                 <td>"+g+"</td>             </tr>     ";return h}function addHrFeedbackToList(a,b,c,d,e,f){$("#feedbackDetails").append(hrFeedbackList(a,b,c,d,e,f))}function showHrFeedbackList(){$("#hrFeedbackTable").hasClass("hidden")&&$("#hrFeedbackTable").removeClass("hidden"),$("#hrFeedbackTable_wrapper").hasClass("hidden")&&$("#hrFeedbackTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrFeedbackHeader(){var a="         <table class='table table-striped hidden' id='hrFeedbackTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Total no of Feedback recieved</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                 </tr>             </thead>             <tbody id='feedbackDetails'>             </tbody>         </table>     ";return a}function hrFeedbackList(a,b,c,d,e,f){var g="             <tr>                 <td>"+a+"</td>                 <td>"+b+"</td>                 <td>"+c+"</td>                 <td>"+d+"</td>                 <td>"+e+"</td>                 <td>"+f+"</td>             </tr>     ";return g}function addHrSuperSectorToList(a,b,c,d,e,f){$("#superSectorDetails").append(hrSuperSectorList(a,b,c,d,e,f))}function showHrSuperSectorList(){$("#hrSuperSectorTable").hasClass("hidden")&&$("#hrSuperSectorTable").removeClass("hidden"),$("#hrSuperSectorTable_wrapper").hasClass("hidden")&&$("#hrSuperSectorTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden")}function hrSuperSectorHeader(){var a="     <table class='table table-striped hidden' id='hrSuperSectorTable'>         <thead>             <tr>                <th>Super Sector</th>     \t       <th>Employees</th>                <th>No. with Objectives</th>                <th>No. with Development</th>                <th>% with Objectives</th>                <th>% with Development</th>             </tr>         </thead>         <tbody id='superSectorDetails'>         </tbody>     </table>     ";return a}function hrSuperSectorList(a,b,c,d,e,f){var g="             <tr>                <td>"+a+"</td>     \t       <td>"+b+"</td>                <td>"+c+"</td>                <td>"+d+"</td>                <td>"+e+"%</td>                <td>"+f+"%</td>             </tr>     ";return g}$(function(){$(".selectpicker").selectpicker(),verifyUser(),getMyCareerStats(),getHRSuperSectorStats(),getEmployeeStats(),getHRObjectivesStats(),getHRFeedbackStats(),getHRDevNeedsStats(),getHRDevNeedBreakdown(),$(".selectpicker").on("change",function(){"MyCareer Overview"===$(this).val()&&showHrOverviewList(),"Super Sector"===$(this).val()&&($.fn.dataTable.isDataTable("#hrSuperSectorTable")?table=$("#hrSuperSectorTable").DataTable(showHrSuperSectorList()):(table=$("#hrSuperSectorTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrSuperSectorList())),"Total Accounts"===$(this).val()&&($.fn.dataTable.isDataTable("#hrEmployeeTable")?table=$("#hrEmployeeTable").DataTable(showHrEmployeeList()):(table=$("#hrEmployeeTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrEmployeeList())),"Objectives"===$(this).val()&&($.fn.dataTable.isDataTable("#hrObjectivesTable")?table=$("#hrObjectivesTable").DataTable(showHrObjectivesList()):(table=$("#hrObjectivesTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrObjectivesList())),"Development Needs Overview"===$(this).val()&&($.fn.dataTable.isDataTable("#hrDevNeedsTable")?table=$("#hrDevNeedsTable").DataTable(showHrDevelopmentNeedsList()):(table=$("#hrDevNeedsTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrDevelopmentNeedsList())),"Development Needs Breakdown"===$(this).val()&&($.fn.dataTable.isDataTable("#hrDevNeedsBreakdownTable")?table=$("#hrDevNeedsBreakdownTable").DataTable(showHrDevelopmentNeedsBreakdownList()):(table=$("#hrDevNeedsBreakdownTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrDevelopmentNeedsBreakdownList())),"Feedback"===$(this).val()&&($.fn.dataTable.isDataTable("#hrFeedbackTable")?table=$("#hrFeedbackTable").DataTable(showHrFeedbackList()):(table=$("#hrFeedbackTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrFeedbackList()))})});