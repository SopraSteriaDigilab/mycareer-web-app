function addDevelopmentNeedToDB(a,b,c,d,e){$.ajax({url:"http://"+getEnvironment()+":8080/addDevelopmentNeed/"+a,method:"POST",xhrFields:{withCredentials:!0},data:{title:b,description:c,category:d,timeToCompleteBy:e},success:function(a){0==lastDevID&&$("#all-dev-need").removeClass("text-center").empty(),addDevelopmentNeedToList(++lastDevID,b,c,d,formatDate(e),0,!1),showProposedDevelopmentTab(),toastr.success(a)},error:function(a,b,c){toastr.error(a.responseText)}})}function editDevelopmentNeedOnDB(a,b,c,d,e,f,g){$.ajax({url:"http://"+getEnvironment()+":8080/editDevelopmentNeed/"+a,method:"POST",xhrFields:{withCredentials:!0},data:{devNeedID:b,title:c,description:d,category:e,timeToCompleteBy:f,progress:g},success:function(a){editDevelopmentNeedOnList(b,c,d,e,f,g),toastr.success(a)},error:function(a,b,c){toastr.error(a.responseText)}})}function editDevelopmentNeedProgressOnDB(a,b,c){$.ajax({url:"http://"+getEnvironment()+":8080/editDevelopmentNeedProgress/"+a,method:"POST",xhrFields:{withCredentials:!0},data:{devNeedID:b,progress:c},success:function(a){updateDevelopmentNeedStatusOnList(b,c),toastr.success(a)},error:function(a,b,c){toastr.error(a.responseText)}})}function openAddDevelopmentNeedModal(){$("#dev-need-modal-type").val("add"),setDevelopmentNeedModalContent("","","",categoryIDs[0],getToday(),0,0),showDevelopmentNeedModal(!0)}function openEditDevelopmentNeedModal(a){$("#dev-need-modal-type").val("edit");var b=a,c=$("#dev-need-title-"+a).text().trim(),d=$("#dev-need-text-"+a).text().trim(),e=categoryIDs[$("#dev-need-category-id-"+a).val()],f=$("#dev-need-date-"+a).text().trim(),g=$("#dev-need-status-"+a).val();f=reverseDateFormat(f),setDevelopmentNeedModalContent(b,c,d,e,f,1,g),showDevelopmentNeedModal(!0)}function addDevelopmentNeedToList(a,b,c,d,e,f,g){g===!0||"true"===g?$("#dev-need-archived").append(developmentNeedListHTML(a,b,c,d,e,f,g)):$("#all-dev-need").append(developmentNeedListHTML(a,b,c,d,e,f,g))}function editDevelopmentNeedOnList(a,b,c,d,e,f){$("#dev-need-title-"+a).text(b),$("#dev-need-text-"+a).text(c),$("#dev-need-category-"+a).text(categoryList[d]),$("#dev-need-category-id-"+a).val(d),$("#dev-need-date-"+a).text("").append("<h6 class='pull-right'><b>"+formatDate(e)+"</b></h6>"),$("#dev-need-status-"+a).val(f)}function clickArchiveDevNeed(a,b){$("#dev-need-is-archived-"+a).val(b),editDevNeedArchiveOnDB(a,b)}function editDevNeedArchiveOnDB(a,b){$.ajax({url:"http://"+getEnvironment()+":8080/toggleDevNeedArchive/"+getADLoginID(),method:"POST",xhrFields:{withCredentials:!0},data:{developmentNeedID:a},success:function(c){updateDevelopmentNeedsList(a),b||updateArchiveTabDevNeeds(),toastr.success(c)},error:function(a,b,c){toastr.error(a.responseText)}})}function updateDevelopmentNeedsList(a){var b=$("#dev-need-title-"+a).text(),c=$("#dev-need-text-"+a).text(),d=$("#dev-need-date-"+a).text(),e=$("#dev-need-category-"+a).text(),g=($("#dev-need-category-id-"+a).val(),$("#dev-need-status-"+a).val()),h=$("#dev-need-is-archived-"+a).val();$("#dev-need-item-"+a).fadeOut(400,function(){$(this).remove()}),addDevelopmentNeedToList(a,b,c,e,d,g,h)}function updateDevelopmentNeedStatusOnDB(a,b){if("true"===$("#dev-need-is-archived-"+a).val()||1==$("#dev-need-is-archived-"+a).val()||b===parseInt($("#dev-need-status-"+a).val()))return!1;var c=getADLoginID();editDevelopmentNeedProgressOnDB(c,a,b)}function updateDevelopmentNeedStatusOnList(a,b){switch($("#dev-need-status-"+a).val(b),parseInt(b)){case 0:$("#started-dev-need-dot-"+a).removeClass("complete"),$("#complete-dev-need-dot-"+a).removeClass("complete");break;case 1:$("#started-dev-need-dot-"+a).addClass("complete"),$("#complete-dev-need-dot-"+a).removeClass("complete");break;case 2:$("#started-dev-need-dot-"+a).addClass("complete"),$("#complete-dev-need-dot-"+a).addClass("complete")}$("#dev-need-all-tab").hasClass("active")||$("#development-need-item-"+a).fadeOut(),$("#development-need-item-"+a).removeClass("proposed started completed"),$("#development-need-item-"+a).addClass(statusList[parseInt(b)])}function updateArchiveTabDevNeeds(){$(".panel-group").each(function(){$(this).hasClass("archived-dev-need-item")?$(this).addClass("active in"):$(this).removeClass("active in")})}function isArchivedItem(a){return 1==a||"true"===a?"archived-dev-need-item":"unarchived-dev-need-item"}function developmentNeedListHTML(a,b,c,d,e,f,g){var h="     <div class='panel-group tab-pane fade dev-need "+isArchivedItem(g)+" "+statusList[f]+" active in' id='development-need-item-"+a+"'>         <div class='panel panel-default' id='panel'> \t        <input type='hidden' id='dev-need-status-"+a+"' value='"+f+"'> \t        <input type='hidden' id='dev-need-category-id-"+a+"' value='"+d+"'>         \t<div class='panel-heading'>             \t<div class='row'>             \t\t<div class='col-sm-6'> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-6' id='dev-need-no-"+a+"'><h6><b>#"+a+"</b></h6></div> \t\t            \t\t<div class='col-sm-6' id='dev-need-date-"+a+"'><h6 class='pull-right'><b>"+e+"</b></h6></div> \t            \t\t</div> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-12 wrap-text' id='dev-need-title-"+a+"'>"+b+"</div> \t            \t\t</div>             \t\t</div>             \t\t<div class='col-sm-5 bs-wizard'>             \t\t\t <div class='col-xs-4 bs-wizard-step complete' id='proposed-dev-need-dot-"+a+"' onClick='updateDevelopmentNeedStatusOnDB("+a+", 0)'> \t\t\t\t\t      <div class='text-center progress-link' id='test' style='cursor:pointer'><h6>Proposed</h6></div> \t\t\t\t\t      <div  class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step "+checkComplete(f,1)+"' id='started-dev-need-dot-"+a+"' onClick='updateDevelopmentNeedStatusOnDB("+a+", 1)'> \t\t\t\t\t       <div class='text-center progress-link' style='cursor:pointer'><h6>In-Progress</h6></div> \t\t\t\t\t       <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t       <div  class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t       <div  class='bs-wizard-dot-complete' style='cursor:pointer'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step "+checkComplete(f,2)+"' id='complete-dev-need-dot-"+a+"' onClick='updateDevelopmentNeedStatusOnDB("+a+", 2)'> \t\t\t\t\t       <div class='text-center progress-link' style='cursor:pointer'><h6>Complete</h6></div> \t\t\t\t\t       \t <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t        <div class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t        <div  class='bs-wizard-dot-complete' style='cursor:pointer'></div> \t\t\t\t\t     </div>             \t\t</div>             \t\t<div class='col-sm-1 chev-height'> \t\t\t\t\t  <a data-toggle='collapse' href='#collapse-dev-need-"+a+"' class='collapsed'></a> \t\t\t\t\t</div>             \t</div>             </div>                     <div id='collapse-dev-need-"+a+"' class='panel-collapse collapse'>                     <div class='panel-body'>                     <div class='row'>                         <div class='col-md-6'>                             <h5><b>Description</b></h5>                         </div>                        \t<div class='col-md-6' >                         \t<input type='hidden' id='dev-need-category-id-"+a+"' value='"+d+"'> \t                        <h6><b> Category: </b><span id='dev-need-category-"+a+"'>"+categoryList[d]+"</span></h6>\t                    </div>                     </div>                     <div class='row'>                         <div class='col-md-12 wrap-text'>                             <p id='dev-need-text-"+a+"'>"+c+"</p>                         </div>                     </div>                     "+devNeedsButtonsHTML(a,g);return h}function devNeedsButtonsHTML(a,b){var c="     <div class='col-md-12'> \t\t<div class='col-sm-6'>         \t<button type='button' class='btn btn-block btn-default pull-left'  onClick='clickArchiveDevNeed("+a+", true)' id='archive-dev-need'>Archive</button>         </div>         <div class=' col-sm-6'>         \t<button type='button' class='btn btn-block btn-default' onClick='openEditDevelopmentNeedModal("+a+")'>Edit</button>         </div>     </div> ";if(b===!0||"true"===b){var d=" \t\t    <div class='col-md-12'> \t\t        <div class=' col-sm-6 pull-right'> \t\t        \t<button type='button' class='btn btn-block btn-default pull-left'  onClick='clickArchiveDevNeed("+a+", false)' id='archive-dev-need'>Restore</button> \t\t        </div> \t\t    </div> \t\t";return d}return c}function clickSubmitDevelopmentNeed(){var a=$("#dev-need-modal-type").val(),b=getADLoginID(),c=$("#development-need-id").val(),d=$("#development-need-title").val().trim(),e=$("#development-need-text").val().trim(),f=$("#category-radio input:radio:checked").val(),g=$("#development-need-date").val().trim(),h=parseInt($("#development-need-status").val());return!checkIfPastDate(g)&&!checkEmpty("development-need-modal-validate",!0)&&("add"==a?addDevelopmentNeedToDB(b,d,e,f,g):editDevelopmentNeedOnDB(b,c,d,e,f,g,h),void showDevelopmentNeedModal(!1))}function setDevelopmentNeedModalContent(a,b,c,d,e,f,g){$("#dev-need-modal-title-type").text(modalStatusList[f]),$("#development-need-id").val(a),$("#development-need-title").val(b),$("#development-need-text").val(c),$("#"+d).prop("checked",!0),$("#development-need-date").val(e),$("#development-need-status").val(g),$("#submit-dev-need").prop("disabled",enableSubmit(f))}function showDevelopmentNeedModal(a){a?$("#development-need-modal").modal({backdrop:"static",keyboard:!1,show:!0}):(setDevelopmentNeedModalContent("","","",categoryIDs[0],getToday(),0,0),$("#development-need-modal").modal("hide"))}function showProposedDevelopmentTab(){$("#dev-need-all-tab").hasClass("active")||$("#dev-need-proposed-tab").find("a").trigger("click")}$(function(){getDevelopmentNeedsList(getADLoginID()),initDatePicker("development-need",new Date),$("#add-dev-need").click(function(){openAddDevelopmentNeedModal()}),$(".development-need-modal-validate").keyup(function(){validateForm("development-need-modal-validate","submit-dev-need")}),$("#timeframe-radio").change(function(){toggleInputeDate($("#timeframe-radio input:radio:checked").val())}),$("#submit-dev-need").click(function(){clickSubmitDevelopmentNeed()}),$("#dev-need-all-tab").click(function(){$(".unarchived-dev-need-item").css({display:""})}),$("#dev-need-proposed-tab").click(function(){$(".proposed").css({display:""})}),$("#dev-need-started-tab").click(function(){$(".started").css({display:""})}),$("#dev-need-completed-tab").click(function(){$(".completed").css({display:""})}),$("#close-dev-need, #close-dev-need-cross").on("click",function(a){clickCloseDevNeed(a)})});