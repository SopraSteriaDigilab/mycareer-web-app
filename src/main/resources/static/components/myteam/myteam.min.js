function getReportees(){$("#reportee-list").append("<h5>Loading Reportees...</h5>"),$.ajax({url:"http://"+getEnvironment()+":8080/getReportees/"+getADLoginID(),cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){$("#reportee-list").empty(),$("#info-holder").append("<span id='info-message' class='text-center'><h5>Please select a reportee </h5></span>"),$.each(a,function(a,b){addReporteeToList(b.employeeID,b.fullName,b.username,b.emailAddress)})},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting reportees, please try again later.")}})}function removeApostrophe(a){return a.indexOf("'")!=-1&&(a=a.replace(/'/g,"")),a}function addReporteeToList(a,b,c,d){$("#reportee-list").append(reporteeListItemHTML(a,b,c,d))}function reporteeListItemHTML(a,b,c,d){var e=" \t\t<div id='panel-"+a+"' class='panel panel-default reportee-panel' style='cursor:pointer' onClick='getReporteeCareer("+a+',"'+removeApostrophe(b)+'", "'+d+"\", this)' > \t\t    <div class='panel-heading'> \t\t        <div class='row'> \t\t           <div class='col-md-2'> \t\t           \t\t"+getProfilePicture(c,36)+" \t\t           </div> \t\t           <div class='col-md-8'><h5><b>"+b+"</b></h5></div> \t\t        </div> \t\t    </div> \t\t  </div>   ";return e}function selectedReportee(a){$(".reportee-panel").each(function(b){a.id==this.id?$(this).addClass("selected-panel"):$(this).removeClass("selected-panel")})}function getReporteeCareer(a,b,c,d){checkSelectedUser(parseInt(a),c)&&(selectedReportee(d),clearReporteeLists(),showReporteeView(b),getObjectivesList(a),getReporteeCompetencyList(a),getGeneralFeedbackList(a),getDevelopmentNeedsList(a),getReporteeNotesList(a))}function getReporteeCompetencyList(a){$.ajax({url:"http://"+getEnvironment()+":8080/getCompetencies/"+a,cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(a){var b=[];$.each(a,function(a,c){c.isSelected&&b.push(c.title)}),addCompetenciesToList(b)},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting competencies, please try again later.")}})}function getReporteeNotesList(a){$.ajax({url:"http://"+getEnvironment()+":8080/getNotes/"+a,cache:!1,headers:{"Content-Type":"application/json"},method:"GET",xhrFields:{withCredentials:!0},success:function(a){$.each(a,function(a,b){var c=timeStampToDateTime(new Date(b.timestamp));addNoteToReporteeList(b.providerName,b.noteDescription,c)})},error:function(a,b,c){console.log("error",c),toastr.error("Sorry, there was a problem getting notes, please try again later.")}})}function proposeObjective(a,b,c,d,e){$.ajax({url:"http://"+getEnvironment()+":8080/addProposedObjective/"+a,method:"POST",xhrFields:{withCredentials:!0},data:{title:b,description:c,completedBy:d,emails:e},success:function(a){a.indexOf("Objective Proposed for")!==-1&&a.indexOf("Error")!==-1?toastr.warning(a):a.indexOf("Error")!==-1?toastr.error(a):(e.indexOf(selectedReporteeEmail.trim())!==-1&&addObjectiveToList(++lastObjID,b,c,d,0,!1),toastr.success(a))},error:function(a,b,c){toastr.error(a.responseText)}})}function addNoteToReporteeDB(a,b,c,d){$.ajax({url:"http://"+getEnvironment()+":8080/addNoteToReportee/"+a,method:"POST",headers:{"Content-Type":"application/json"},xhrFields:{withCredentials:!0},data:JSON.stringify({providerName:b,noteDescription:c}),success:function(a){0==lastNoteID&&$("#general-notes-list").removeClass("text-center").empty(),lastNoteID++,addNoteToReporteeList(b,c,d),toastr.success(a)},error:function(a,b,c){toastr.error(a.responseText)}})}function clearReporteeLists(){$("#reportee-obj-list, #reportee-comp-list, #reportee-feed-list, #reportee-dev-needs-list, #reportee-notes-list").empty()}function checkSelectedUser(a,b){return selectedReporteeID!=a&&(selectedReporteeID=a,selectedReporteeEmail=b,!0)}function showReporteeView(a){$(".reportee-name").each(function(){$(this).text(a)}),reporteeSectionHidden&&($("#info-message").remove(),$("#reportee-body").removeClass("hidden"),reporteeSectionHidden=!1)}function openAddReporteeNoteModal(){$("#reportee-note-input").val(""),showReporteeNoteModal(!0)}function showReporteeNoteModal(a){a?($("#submit-reportee-note").prop("disabled",!0),$("#reportee-note-modal").modal({backdrop:"static",keyboard:!1,show:!0})):$("#reportee-note-modal").modal("hide")}function clickSubmitReporteeNote(){var a=selectedReporteeID,b=getADfullName(),c=$("#reportee-note-input").val().trim(),d=timeStampToDateTime(new Date);addNoteToReporteeDB(a,b,c,d),showReporteeNoteModal(!1)}function addObjectiveToList(a,b,c,d,e,f){f!==!1&&"false"!==f||$("#reportee-obj-list").append(reporteeObjectiveListHTML(a,b,c,d,e,f))}function addCompetenciesToList(a){0==a.length&&$("#reportee-comp-list").append("No Competencies have been selected."),$("#reportee-comp-list").append(reporteeCompetenciesListHTML(a))}function addDevelopmentNeedToList(a,b,c,d,e,f){lastDevID=a,$("#reportee-dev-needs-list").append(reporteeDevelopmentNeedListHTML(a,b,c,d,e,f))}function addGeneralFeedbackToList(a,b,c,d,e){$("#reportee-feed-list").append(reporteeFeedbackDescriptionListHTML(a,b,c,d,e))}function addNoteToReporteeList(a,b,c){$("#reportee-notes-list").prepend(reporteeNotesListHTML(a,b,c))}function reporteeObjectiveListHTML(a,b,c,d,e,f){var g="     <div class='panel-group' id='objective-item-"+a+"'>         <div class='panel panel-default' id='panel'>         <input type='hidden' id='obj-status-"+a+"' value='"+e+"'>         <input type='hidden' id='obj-is-archived-"+a+"' value='"+f+"'>         \t<div class='panel-heading'>             \t<div class='row'>             \t\t<div class='col-sm-6'> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-6' id='obj-no-"+a+"'><h6><b>#"+a+"</b></h6></div> \t\t            \t\t<div class='col-sm-6' id='obj-date-"+a+"'><h6 class='pull-right'><b>"+d+"</b></h6></div> \t            \t\t</div> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-12 wrap-text' id='obj-title-"+a+"'>"+b+"</div> \t            \t\t</div>             \t\t</div>             \t\t<div class='col-sm-5 bs-wizard'>             \t\t\t <div class='col-xs-4 bs-wizard-step complete' id='proposed-obj-dot-"+a+"'> \t\t\t\t\t      <div class='text-center' id='test'><h6>Proposed</h6></div> \t\t\t\t\t      <div  class='bs-wizard-dot-start'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step "+checkComplete(e,1)+"' id='started-obj-dot-"+a+"'> \t\t\t\t\t       <div class='text-center'><h6>In-Progress</h6></div> \t\t\t\t\t       <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t       <div  class='bs-wizard-dot-start'></div> \t\t\t\t\t       <div  class='bs-wizard-dot-complete'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step  "+checkComplete(e,2)+"' id='complete-obj-dot-"+a+"'> \t\t\t\t\t       <div class='text-center'><h6>Complete</h6></div> \t\t\t\t\t       \t <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t        <div class='bs-wizard-dot-start'></div> \t\t\t\t\t        <div  class='bs-wizard-dot-complete'></div> \t\t\t\t\t     </div>             \t\t</div>             \t\t<div class='col-sm-1 chev-height'> \t\t\t\t\t  <a data-toggle='collapse' href='#collapse-obj-"+a+"' class='collapsed'></a> \t\t\t\t\t</div>             \t</div>             </div>                     <div id='collapse-obj-"+a+"' class='panel-collapse collapse'>                     <div class='panel-body'>                     <div class='row'>                         <div class='col-md-4'>                             <h5><b>Description</b></h5>                         </div>                         <div class='col-md-8'>                         </div>                     </div>                     <div class='row'>                         <div class='col-md-12 wrap-text'>                             <p id='obj-text-"+a+"'>"+c+"</p>                         </div>                     </div>                 </div>             </div>                  </div>     </div>     ";return g}function reporteeCompetenciesListHTML(a){for(var b="",c=0;c<a.length;c++)b+=a[c],b+=c==a.length-1?".":", ";return b}function reporteeFeedbackDescriptionListHTML(a,b,c,d,e){var f=" \t<ul class='list-group'> \t\t<li class='list-group-item'> \t\t\t<div class='row'> \t\t\t\t<div class='col-md-6'><h6><b>"+b+"</b></h6></div> \t\t\t\t<div class='col-md-6'><h6 class='pull-right'><b>"+d+"</b></h6></div> \t\t\t</div> \t\t\t<div class='row'> \t\t\t\t<div class='col-md-12 wrap-text'><h5>"+c+"</h5></div> \t\t\t</div> \t\t</li> \t</ul>";return f}function reporteeDevelopmentNeedListHTML(a,b,c,d,e,f){var g=" \t    <div class='panel-group' id='dev-need-item-"+a+"'> \t        <div class='panel panel-default' id='panel'> \t\t        <input type='hidden' id='dev-need-status-"+a+"' value='"+f+"'> \t\t        <input type='hidden' id='dev-need-category-id-"+a+"' value='"+d+"'> \t        \t<div class='panel-heading'> \t            \t<div class='row'> \t            \t\t<div class='col-sm-6'> \t\t            \t\t<div class='row'> \t\t\t            \t\t<div class='col-sm-6' id='dev-need-no-"+a+"'><h6><b>#"+a+"</b></h6></div> \t\t\t            \t\t<div class='col-sm-6' id='dev-need-date-"+a+"'><h6 class='pull-right'><b>"+e+"</b></h6></div> \t\t            \t\t</div> \t\t            \t\t<div class='row'> \t\t\t            \t\t<div class='col-sm-12 wrap-text' id='dev-need-title-"+a+"'>"+b+"</div> \t\t            \t\t</div> \t            \t\t</div> \t            \t\t<div class='col-sm-5 bs-wizard'> \t            \t\t\t <div class='col-xs-4 bs-wizard-step complete' id='proposed-dev-need-dot-"+a+"'> \t\t\t\t\t\t      <div class='text-center' id='test'><h6>Proposed</h6></div> \t\t\t\t\t\t      <div  class='bs-wizard-dot-start'></div> \t\t\t\t\t\t     </div> \t\t\t\t\t\t     <div class='col-xs-4 bs-wizard-step "+checkComplete(f,1)+"' id='started-dev-need-dot-"+a+"'> \t\t\t\t\t\t       <div class='text-center'><h6>In-Progress</h6></div> \t\t\t\t\t\t       <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t\t       <div  class='bs-wizard-dot-start'></div> \t\t\t\t\t\t       <div  class='bs-wizard-dot-complete'></div> \t\t\t\t\t\t     </div> \t\t\t\t\t\t     <div class='col-xs-4 bs-wizard-step  "+checkComplete(f,2)+"' id='complete-dev-need-dot-"+a+"'> \t\t\t\t\t\t       <div class='text-center'><h6>Complete</h6></div> \t\t\t\t\t\t       \t <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t\t        <div class='bs-wizard-dot-start'></div> \t\t\t\t\t\t        <div  class='bs-wizard-dot-complete'></div> \t\t\t\t\t\t     </div> \t            \t\t</div> \t            \t\t<div class='col-sm-1 chev-height'> \t\t\t\t\t\t  <a data-toggle='collapse' href='#collapse-dev-need-"+a+"' class='collapsed'></a> \t\t\t\t\t\t</div> \t            \t</div> \t            </div> \t            <div id='collapse-dev-need-"+a+"' class='panel-collapse collapse'> \t                <div class='panel-body'> \t                    <div class='row'> \t                        <div class='col-md-6'> \t                            <h5><b>Description</b></h5> \t                        </div> \t                       \t<div class='col-md-6' > \t                        \t<input type='hidden' id='dev-need-category-id-"+a+"' value='"+d+"'> \t\t                        <h6><b> Category: </b><span id='dev-need-category-"+a+"'>"+categoryList[d]+"</span></h6>\t\t                    </div> \t                    </div> \t                    <div class='row'> \t                        <div class='col-md-12 wrap-text'> \t                            <p id='dev-need-text-"+a+"'>"+c+"</p> \t                        </div> \t                    </div> \t                </div> \t            </div> \t         \t        </div> \t    </div> \t    ";return g}function reporteeNotesListHTML(a,b,c){var d=" \t  <ul class='list-group-item'> \t  \t<div class='row'> \t\t\t<div class='col-md-6 wrap-text'><h6 ><b>"+a+"</b></h6></div> \t\t\t<div class='col-md-6'><h6 class='pull-right'><b>"+c+"</b></h6></div> \t\t</div> \t\t<div class='row'> \t\t\t<div class='col-md-12 wrap-text'><p>"+b+"</p></div> \t\t</div> \t  </ul> \t  ";return d}function addProposed(){"true"!==isUserManager()&&1!=isUserManager()||$("#nav-bar-buttons").prepend("<button type='button' class='btn btn-default navbar-btn pull-right' id='proposed-objective' onClick='openProposedObjectiveModal()'>Propose Objective</button>")}$(function(){getReportees(),addProposed(),$("#add-reportee-note").click(function(){openAddReporteeNoteModal()}),$(".reportee-note-validate").keyup(function(){validateForm("reportee-note-validate","submit-reportee-note")}),$("#submit-reportee-note").click(function(){clickSubmitReporteeNote()})});var reporteeSectionHidden=!0,selectedReporteeID=0,selectedReporteeEmail="";