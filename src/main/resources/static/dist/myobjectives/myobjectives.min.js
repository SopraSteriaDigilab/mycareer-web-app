function addObjectiveToDB(t,e,i,o,s){$.ajax({url:"http://"+getEnvironment()+"/addObjective/"+t,method:"POST",xhrFields:{withCredentials:!0},data:{title:e,description:i,dueDate:o},success:function(t){0==nextObjId.length&&$("#all-obj").removeClass("text-center").empty();var s=nextObjectiveID();addObjectiveToList(s,e,i,formatDate(o),0,!1,getADfullName(),timeStampToLongDate(new Date)),showProposedObjTab(),addTag(s,e,"obj"),toastr.success(t)},error:function(t,e,i){toastr.error(t.responseText)}})}function editObjectiveOnDB(t,e,i,o,s,a,d){$.ajax({url:"http://"+getEnvironment()+"/editObjective/"+t,method:"POST",xhrFields:{withCredentials:!0},data:{objectiveId:e,title:i,description:o,dueDate:s},success:function(d){editObjectiveOnList(t,e,i,o,s,a),editTag(e,i,"obj"),toastr.success(d)},error:function(t,e,i){toastr.error(t.responseText)}})}function editObjectiveProgressOnDB(t,e,i,o,s){$.ajax({url:"http://"+getEnvironment()+"/updateObjectiveProgress/"+t,method:"POST",xhrFields:{withCredentials:!0},data:{objectiveId:e,progress:i,comment:s},success:function(t){if(updateObjectiveStatusOnList(e,i),2==i){var a=""===s?getADfullName()+" has completed Objective '"+o+"'.":getADfullName()+" has completed Objective '"+o+"'.  A comment was added: '"+s+"'.";addNoteToList(++lastNoteID,"Auto Generated",a,timeStampToDateTimeGMT(new Date),timeStampToClassDate(new Date),emptyArray,emptyArray),$("#edit-objective-button-"+e).remove()}toastr.success(t)},error:function(t,e,i){toastr.error(t.responseText)}})}function deleteObjective(t,e,i,o){$.ajax({url:"http://"+getEnvironment()+"/deleteObjective/"+t,method:"POST",xhrFields:{withCredentials:!0},data:{objectiveId:e,comment:o},success:function(t){removeObjectiveFromList(e);var s=""===o?getADfullName()+" has deleted Objective '"+i+"'.":getADfullName()+" has deleted Objective '"+i+"'.  A comment was added: '"+o+"'.";addNoteToList(++lastNoteID,"Auto Generated",s,timeStampToDateTimeGMT(new Date),timeStampToClassDate(new Date),emptyArray,emptyArray),deleteTag(e,"objective"),toastr.success(t)},error:function(t,e,i){toastr.error(t.responseText)}})}function openAddObjectiveModal(){$("#obj-modal-type").val("add"),setObjectiveModalContent("","","",getToday(),0,0),showObjectiveModal(!0)}function openEditObjectiveModal(t){$("#obj-modal-type").val("edit");var e=t,i=$("#obj-title-"+t).text().trim(),o=$("#obj-text-"+t).text().trim(),s=$("#obj-date-"+t).text().trim(),a=$("#obj-status-"+t).val();s=reverseDateFormat(s),setObjectiveModalContent(e,i,o,s,a,1),showObjectiveModal(!0)}function addObjectiveToList(t,e,i,o,s,a,d,c){!0===a||"true"===a?$("#obj-archived").append(objectiveListHTML(t,e,i,o,s,a,d,c)):$("#all-obj").append(objectiveListHTML(t,e,i,o,s,a,d,c))}function editObjectiveOnList(t,e,i,o,s,a){$("#obj-title-"+e).text(i),$("#obj-text-"+e).text(o),$("#obj-date-"+e).text("").append('<h6 class="pull-right"><b>'+formatDate(s)+"</b></h6>"),$("#obj-status-"+e).val(a)}function clickArchiveObjective(t,e){$("#obj-is-archived-"+t).val(e),editObjectiveArchiveOnDB(t,e)}function editObjectiveArchiveOnDB(t,e){$.ajax({url:"http://"+getEnvironment()+"/toggleObjectiveArchive/"+getADLoginID(),method:"POST",xhrFields:{withCredentials:!0},data:{objectiveId:t},success:function(i){updateObjectiveList(t),e||updateArchiveTab(),toastr.success(i)},error:function(t,e,i){toastr.error(t.responseText)}})}function updateObjectiveList(t){var e=$("#obj-title-"+t).text(),i=$("#obj-text-"+t).text(),o=$("#obj-date-"+t).text(),s=$("#obj-status-"+t).val(),a=$("#obj-is-archived-"+t).val(),d=$("#obj-proposedBy-"+t).text(),c=$("#obj-createdOn-"+t).text();$("#objective-item-"+t).fadeOut(400,function(){$(this).remove()}),addObjectiveToList(t,e,i,o,s,a,d,c)}function clickObjectiveFeedback(t){window.location.replace("http://"+getEnvironment()+"/mycareer/feedback")}function updateObjectiveStatusOnDB(t,e,i){if("true"===$("#obj-is-archived-"+t).val()||1==$("#obj-is-archived-"+t).val()||e===parseInt($("#obj-status-"+t).val())||2==parseInt($("#obj-status-"+t).val()))return!1;if(2==e)$("#complete-id").empty().append(t),$("#complete-status").empty().append(e),$("#modal-confirmation").empty().append("Objective"),$("#modal-alert").empty().append("an Objective"),$("#completedTitle").empty().append(i),openCompleteObjectiveModal(t,i);else{editObjectiveProgressOnDB(getADLoginID(),t,e,i,"")}}function openCompleteObjectiveModal(t,e){$("#completed-status-modal").modal({backdrop:"static",keyboard:!1,show:!0}),$("textarea").val("")}function updateObjectiveStatusOnList(t,e){switch($("#obj-status-"+t).val(e),parseInt(e)){case 0:$("#started-obj-dot-"+t).removeClass("complete"),$("#complete-obj-dot-"+t).removeClass("complete");break;case 1:$("#started-obj-dot-"+t).addClass("complete"),$("#complete-obj-dot-"+t).removeClass("complete");break;case 2:$("#started-obj-dot-"+t).addClass("complete"),$("#complete-obj-dot-"+t).addClass("complete"),$("textarea").val(""),$("#completed-status-modal").modal("hide")}$("#obj-all-tab").hasClass("active")||$("#objective-item-"+t).fadeOut(),$("#objective-item-"+t).removeClass("proposed started completed"),$("#objective-item-"+t).addClass(statusList[parseInt(e)])}function updateArchiveTab(){$(".panel-group").each(function(){$(this).hasClass("archived-obj-item")?$(this).addClass("active in"):$(this).removeClass("active in")})}function isArchivedItem(t){return 1==t||"true"===t?"archived-obj-item":"unarchived-obj-item"}function clickDeleteObjective(t,e){$("#delete-id").empty().append(t),$("#modal-title-type").empty().append("Objective"),$("#modal-type").empty().append("Objective"),$("#modal-warning").empty().append("an Objective"),$("#deleteTitle").empty().append(e),openDeleteObjectiveModal(t,e)}function openDeleteObjectiveModal(t,e){$("#deleteModal").modal({backdrop:"static",keyboard:!1,show:!0}),$("textarea").val("")}function removeObjectiveFromList(t){nextObjId.sort(function(t,e){return t-e});var e=nextObjId.indexOf(parseInt(t));e>-1&&nextObjId.splice(e,1),$("#objective-item-"+t).fadeOut(400,function(){$(this).remove()}),$("textarea").val(""),$("#deleteModal").modal("hide")}function objectiveListHTML(t,e,i,o,s,a,d,c){return"     <div class='panel-group tab-pane fade "+isArchivedItem(a)+" "+statusList[s]+" active in' id='objective-item-"+t+"'>         <div class='panel panel-default' id='panel'>         <input type='hidden' id='obj-status-"+t+"' value='"+s+"'>         <input type='hidden' id='obj-is-archived-"+t+"' value='"+a+"'>         \t<div class='panel-heading'>             \t<div class='row'>             \t\t<div class='col-sm-6'> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-6' id='obj-no-"+t+"'><h6><b>#"+t+"</b></h6></div> \t\t            \t\t<div class='col-sm-6' id='obj-date-"+t+"'><h6 class='pull-right'><b>"+o+"</b></h6></div> \t            \t\t</div> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-12 wrap-text' id='obj-title-"+t+"'>"+e+"</div> \t            \t\t</div>             \t\t</div>             \t\t<div class='col-sm-5 bs-wizard'>             \t\t\t <div class='col-xs-4 bs-wizard-step complete' id='proposed-obj-dot-"+t+"' onClick='updateObjectiveStatusOnDB("+t+", 0)'> \t\t\t\t\t      <div class='text-center progress-link' style='cursor:pointer'><h6>Proposed</h6></div> \t\t\t\t\t      <div  class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step "+checkComplete(s,1)+"' id='started-obj-dot-"+t+"' onClick='updateObjectiveStatusOnDB("+t+", 1)'> \t\t\t\t\t       <div class='text-center progress-link' style='cursor:pointer'><h6>In-Progress</h6></div> \t\t\t\t\t       <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t       <div  class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t       <div  class='bs-wizard-dot-complete' style='cursor:pointer'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step  "+checkComplete(s,2)+"' id='complete-obj-dot-"+t+"' onClick='updateObjectiveStatusOnDB("+t+',  2, "'+e+"\")'> \t\t\t\t\t       <div class='text-center progress-link' style='cursor:pointer'><h6>Complete</h6></div> \t\t\t\t\t       \t <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t        <div class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t        <div  class='bs-wizard-dot-complete' style='cursor:pointer'></div> \t\t\t\t\t     </div>             \t\t</div>             \t\t<div class='col-sm-1 chev-height'> \t\t\t\t\t  <a data-toggle='collapse' href='#collapse-obj-"+t+"' class='collapsed'></a> \t\t\t\t\t</div>             \t</div>             </div>                     <div id='collapse-obj-"+t+"' class='panel-collapse collapse'>                     <div class='panel-body'>                     <div class='row'>                         <div class='col-md-4'>                             <h6><b>Created on: </b><span id='obj-createdOn-"+t+"'>"+timeStampToLongDate(c)+"</span></h6>                         </div>                         <div class='col-md-3'>                         </div>                         <div class='col-md-5 pull-right'>                             <h6><b>Proposed by: </b><span id='obj-proposedBy-"+t+"'>"+d+"</span></h6>                         </div>                     </div>                     <div class='row'>                         <div class='col-md-12 wrap-text'>                             <p id='obj-text-"+t+"'>"+i+"</p>                         </div>                     </div>                     "+objectivesButtonsHTML(t,a,s,e)}function addEditObjButton(t,e){if(2!==t&&"2"!==t){return" \t\t<div class=' col-sm-6'>         \t<button type='button' class='btn btn-block btn-default' id='edit-objective-button-"+e+"' onClick='openEditObjectiveModal("+e+")'>Edit</button>         </div>"}return""}function objectivesButtonsHTML(t,e,i,o){var s="     <div class='col-md-12'> \t\t<div class='col-sm-6'>         \t<button type='button' class='btn btn-block btn-default pull-left'  onClick='clickArchiveObjective("+t+", true)' id='archive-obj'>Archive</button>         </div>"+addEditObjButton(i,t)+"</div>";if(!0===e||"true"===e){return" \t\t    <div class='col-md-12'> \t\t        <div class=' col-sm-6'> \t\t        \t<button type='button' class='btn btn-block btn-default pull-left'  onClick='clickArchiveObjective("+t+", false)' id='archive-obj'>Restore</button> \t\t        </div> \t            <div class=' col-sm-6'> \t                <button type='button' class='btn btn-block btn-default' onClick='clickDeleteObjective("+t+', "'+o+"\")' id='delete-obj'>Delete</button> \t            </div> \t\t    </div> \t\t"}return s}$(function(){alert("I am in myobjectives - only to edit it, AGAIN"),getObjectivesList(getADLoginID()),$("#competencies").load("../components/myobjectives/competencies/competencies.html"),$("#add-obj").click(function(){openAddObjectiveModal()}),$("#obj-all-tab").click(function(){$(".unarchived-obj-item").css("display","")}),$("#obj-proposed-tab").click(function(){$(".proposed").css({display:""})}),$("#obj-started-tab").click(function(){$(".started").css({display:""})}),$("#obj-completed-tab").click(function(){$(".completed").css({display:""})}),$("#close-obj, #close-obj-cross").on("click",function(t){clickCloseObjective(t)}),$("#delete").click(function(){deleteObjective(getADLoginID(),$("#delete-id").text(),$("#deleteTitle").text(),$("#deletingText").val())}),$("#submit-completed-status-note").click(function(){editObjectiveProgressOnDB(getADLoginID(),$("#complete-id").text(),$("#complete-status").text(),$("#completedTitle").text(),$("#completedText").val())})});