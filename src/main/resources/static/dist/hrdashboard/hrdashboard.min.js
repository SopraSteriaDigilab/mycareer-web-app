function verifyUser(){"false"!==userHasHrDash()&&0!=userHasHrDash()||(window.location="/myobjectives")}function getMyCareerStats(){$.ajax({url:"http://"+getEnvironment()+"/hr/getMyCareerStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(e){addHrDataToList(e.totalAccounts,e.usersWithObjectives,e.usersWithDevNeeds,e.usersWithNotes,e.usersWithCompetencies,e.usersWithFeedbackRequests,e.usersWithFeedback)},error:function(e,t,r){console.log("error",r),toastr.error("Sorry, there was a problem getting HR data, please try again later.")}})}function getEmployeeStats(){$.ajax({url:"http://"+getEnvironment()+"/hr/getEmployeeStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(e){$(".hr-dashboard").append(hrEmployeeHeader()),$.each(e,function(e,t){if("Never"===t.lastLogon)var r=t.lastLogon;else var r=timeStampToLongDate(t.lastLogon);addHrEmployeeToList(t.employeeID,t.fullName,t.company,t.superSector,t.department,r,t.currentEmployee)})},error:function(e,t,r){console.log("error",r),toastr.error("Sorry, there was a problem getting HR Employee data, please try again later.")}})}function getHRObjectivesStats(){$.ajax({url:"http://"+getEnvironment()+"/hr/getObjectiveStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(e){$(".hr-dashboard").append(hrObjectivesHeader()),$.each(e,function(e,t){addHrObjectivesToList(t.employeeID,t.fullName,t.totalObjectives,t.proposed,t.inProgress,t.complete,t.company,t.superSector,t.department)})},error:function(e,t,r){console.log("error",r),toastr.error("Sorry, there was a problem getting HR Objective data, please try again later.")}})}function getHRDevNeedsStats(){$.ajax({url:"http://"+getEnvironment()+"/hr/getDevelopmentNeedStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(e){$(".hr-dashboard").append(hrDevNeedsHeader()),$.each(e,function(e,t){addHrDevelopmentNeedsToList(t.employeeID,t.fullName,t.totalDevelopmentNeeds,t.proposed,t.inProgress,t.complete,t.company,t.superSector,t.department)})},error:function(e,t,r){console.log("error",r),toastr.error("Sorry, there was a problem getting HR Development Needs overview data, please try again later.")}})}function getHRDevNeedBreakdown(){$.ajax({url:"http://"+getEnvironment()+"/hr/getDevelopmentNeedBreakDown",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(e){$(".hr-dashboard").append(hrDevNeedsBreakdownHeader()),$.each(e,function(e,t){addHrDevelopmentNeedsBreakdownToList(t.employeeID,t.fullName,t.title,t.category,t.company,t.superSector,t.department)})},error:function(e,t,r){console.log("error",r),toastr.error("Sorry, there was a problem getting HR Development Needs breakdown data, please try again later.")}})}function getHRFeedbackStats(){$.ajax({url:"http://"+getEnvironment()+"/hr/getFeedbackStats",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(e){$(".hr-dashboard").append(hrFeedbackHeader()),$.each(e,function(e,t){addHrFeedbackToList(t.employeeID,t.fullName,t.totalFeedback,t.company,t.superSector,t.department)})},error:function(e,t,r){console.log("error",r),toastr.error("Sorry, there was a problem getting HR Feedback data, please try again later.")}})}function getHRSuperSectorStats(){$.ajax({url:"http://"+getEnvironment()+"/hr/getSectorBreakDown",cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(e){$(".hr-dashboard").append(hrSuperSectorHeader()),$.each(e,function(e,t){addHrSuperSectorToList(t.sector,t.employees,t.noWithObjs,t.noWithDevNeeds,t.percentObjs,t.percentDevNeeds)})},error:function(e,t,r){console.log("error",r),toastr.error("Sorry, there was a problem getting HR Super Sector data, please try again later.")}})}function addHrDataToList(e,t,r,a,d,s,h){$(".hr-dashboard").append(hrOverviewList(e,t,r,a,d,s,h))}function showHrOverviewList(){$("#hrOverviewTable").hasClass("hidden")&&$("#hrOverviewTable").removeClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrOverviewList(e,t,r,a,d,s,h){return"     <table class='table table-striped hidden HRtable' id='hrOverviewTable'>         <thead>             <tr>                <th>Overview of MyCareer</th>     \t       <th>Number of Users</th>             </tr>         </thead>         <tbody>             <tr>                 <td>Total Accounts Accessed</td>                 <td>"+e+"</td>             </tr>             <tr>                 <td>Users with at least one objective</td>                 <td>"+t+"</td>             </tr>             <tr>                 <td>Users with at least one development need</td>                 <td>"+r+"</td>             </tr>             <tr>                 <td>Users with at least one note</td>                 <td>"+a+"</td>             </tr>             <tr>                 <td>Users that have clicked a competency</td>                 <td>"+d+"</td>             </tr>             <tr>                 <td>Users that have submitted a feedback request</td>                 <td>"+s+"</td>             </tr>             <tr>                 <td>Users that have received feedback</td>                 <td>"+h+"</td>             </tr>         </tbody>     </table>     "}function addHrEmployeeToList(e,t,r,a,d,s,h){$("#employeeDetails").append(hrEmployeeList(e,t,r,a,d,s,h))}function showHrEmployeeList(){$("#hrEmployeeTable").hasClass("hidden")&&$("#hrEmployeeTable").removeClass("hidden"),$("#hrEmployeeTable_wrapper").hasClass("hidden")&&$("#hrEmployeeTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrEmployeeHeader(){return"         <table class='table table-striped hidden HRtable' id='hrEmployeeTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                    <th>Last Logged On</th>                    <th>Current Employee</th>                 </tr>             </thead>             <tbody id='employeeDetails'>             </tbody>         </table>     "}function hrEmployeeList(e,t,r,a,d,s,h){return"             <tr>                 <td>"+e+"</td>                 <td>"+t+"</td>                 <td>"+r+"</td>                 <td>"+a+"</td>                 <td>"+d+"</td>                 <td>"+s+"</td>                 <td>"+h+"</td>             </tr>     "}function addHrObjectivesToList(e,t,r,a,d,s,h,o,l){$("#objectiveDetails").append(hrObjectivesList(e,t,r,a,d,s,h,o,l))}function showHrObjectivesList(){$("#hrObjectivesTable").hasClass("hidden")&&$("#hrObjectivesTable").removeClass("hidden"),$("#hrObjectivesTable_wrapper").hasClass("hidden")&&$("#hrObjectivesTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrObjectivesHeader(){return"         <table class='table table-striped hidden HRtable' id='hrObjectivesTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Total no of Objectives</th>                    <th>Objectives Proposed</th>                    <th>Objectives In-Progress</th>                    <th>Objectives Complete</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                 </tr>             </thead>             <tbody id='objectiveDetails'>             </tbody>         </table>     "}function hrObjectivesList(e,t,r,a,d,s,h,o,l){return"             <tr>                 <td>"+e+"</td>                 <td>"+t+"</td>                 <td>"+r+"</td>                 <td>"+a+"</td>                 <td>"+d+"</td>                 <td>"+s+"</td>                 <td>"+h+"</td>                 <td>"+o+"</td>                 <td>"+l+"</td>             </tr>     "}function addHrDevelopmentNeedsToList(e,t,r,a,d,s,h,o,l){$("#devNeedsDetails").append(hrDevelopmentNeedsList(e,t,r,a,d,s,h,o,l))}function addHrDevelopmentNeedsBreakdownToList(e,t,r,a,d,s,h){$("#devNeedsBreakdownDetails").append(hrDevelopmentNeedsBreakdownList(e,t,r,a,d,s,h))}function showHrDevelopmentNeedsList(){$("#hrDevNeedsTable").hasClass("hidden")&&$("#hrDevNeedsTable").removeClass("hidden"),$("#hrDevNeedsTable_wrapper").hasClass("hidden")&&$("#hrDevNeedsTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function showHrDevelopmentNeedsBreakdownList(){$("#hrDevNeedsBreakdownTable").hasClass("hidden")&&$("#hrDevNeedsBreakdownTable").removeClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").hasClass("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrDevNeedsHeader(){return"         <table class='table table-striped hidden HRtable' id='hrDevNeedsTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Total no of Development Needs</th>                    <th>Development Needs Proposed</th>                    <th>Development Needs In-Progress</th>                    <th>Development Needs Complete</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                 </tr>             </thead>             <tbody id='devNeedsDetails'>             </tbody>         </table>     "}function hrDevNeedsBreakdownHeader(){return"         <table class='table table-striped hidden HRtable' id='hrDevNeedsBreakdownTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Title</th>                    <th>Category</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                 </tr>             </thead>             <tbody id='devNeedsBreakdownDetails'>             </tbody>         </table>     "}function hrDevelopmentNeedsList(e,t,r,a,d,s,h,o,l){return"             <tr>                 <td>"+e+"</td>                 <td>"+t+"</td>                 <td>"+r+"</td>                 <td>"+a+"</td>                 <td>"+d+"</td>                 <td>"+s+"</td>                 <td>"+h+"</td>                 <td>"+o+"</td>                 <td>"+l+"</td>             </tr>     "}function hrDevelopmentNeedsBreakdownList(e,t,r,a,d,s,h){return"             <tr>                 <td>"+e+"</td>                 <td>"+t+"</td>                 <td>"+r+"</td>                 <td>"+a+"</td>                 <td>"+d+"</td>                 <td>"+s+"</td>                 <td>"+h+"</td>             </tr>     "}function addHrFeedbackToList(e,t,r,a,d,s){$("#feedbackDetails").append(hrFeedbackList(e,t,r,a,d,s))}function showHrFeedbackList(){$("#hrFeedbackTable").hasClass("hidden")&&$("#hrFeedbackTable").removeClass("hidden"),$("#hrFeedbackTable_wrapper").hasClass("hidden")&&$("#hrFeedbackTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrSuperSectorTable_wrapper").not("hidden")&&$("#hrSuperSectorTable_wrapper").addClass("hidden")}function hrFeedbackHeader(){return"         <table class='table table-striped hidden HRtable' id='hrFeedbackTable'>             <thead>                 <tr>                    <th>Employee ID</th>                    <th>Employee Name</th>                    <th>Total no of Feedback recieved</th>                    <th>Company</th>                    <th>Super Sector</th>                    <th>Department</th>                 </tr>             </thead>             <tbody id='feedbackDetails'>             </tbody>         </table>     "}function hrFeedbackList(e,t,r,a,d,s){return"             <tr>                 <td>"+e+"</td>                 <td>"+t+"</td>                 <td>"+r+"</td>                 <td>"+a+"</td>                 <td>"+d+"</td>                 <td>"+s+"</td>             </tr>     "}function addHrSuperSectorToList(e,t,r,a,d,s){$("#superSectorDetails").append(hrSuperSectorList(e,t,r,a,d,s))}function showHrSuperSectorList(){$("#hrSuperSectorTable").hasClass("hidden")&&$("#hrSuperSectorTable").removeClass("hidden"),$("#hrSuperSectorTable_wrapper").hasClass("hidden")&&$("#hrSuperSectorTable_wrapper").removeClass("hidden"),$("#hrOverviewTable").not("hidden")&&$("#hrOverviewTable").addClass("hidden"),$("#hrEmployeeTable_wrapper").not("hidden")&&$("#hrEmployeeTable_wrapper").addClass("hidden"),$("#hrObjectivesTable_wrapper").not("hidden")&&$("#hrObjectivesTable_wrapper").addClass("hidden"),$("#hrDevNeedsTable_wrapper").not("hidden")&&$("#hrDevNeedsTable_wrapper").addClass("hidden"),$("#hrDevNeedsBreakdownTable_wrapper").not("hidden")&&$("#hrDevNeedsBreakdownTable_wrapper").addClass("hidden"),$("#hrFeedbackTable_wrapper").not("hidden")&&$("#hrFeedbackTable_wrapper").addClass("hidden")}function hrSuperSectorHeader(){return"     <table class='table table-striped hidden HRtable' id='hrSuperSectorTable'>         <thead>             <tr>                <th>Super Sector</th>     \t       <th>Employees</th>                <th>No. with Objectives</th>                <th>No. with Development</th>                <th>% with Objectives</th>                <th>% with Development</th>             </tr>         </thead>         <tbody id='superSectorDetails'>         </tbody>     </table>     "}function hrSuperSectorList(e,t,r,a,d,s){return"             <tr>                <td>"+e+"</td>     \t       <td>"+t+"</td>                <td>"+r+"</td>                <td>"+a+"</td>                <td>"+d+"%</td>                <td>"+s+"%</td>             </tr>     "}$(function(){$(".selectpicker").selectpicker(),verifyUser(),getMyCareerStats(),getHRSuperSectorStats(),getEmployeeStats(),getHRObjectivesStats(),getHRFeedbackStats(),getHRDevNeedsStats(),getHRDevNeedBreakdown(),$(".selectpicker").on("change",function(){"MyCareer Overview"===$(this).val()&&showHrOverviewList(),"Super Sector"===$(this).val()&&($.fn.dataTable.isDataTable("#hrSuperSectorTable")?table=$("#hrSuperSectorTable").DataTable(showHrSuperSectorList()):(table=$("#hrSuperSectorTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrSuperSectorList())),"Total Accounts"===$(this).val()&&($.fn.dataTable.isDataTable("#hrEmployeeTable")?table=$("#hrEmployeeTable").DataTable(showHrEmployeeList()):(table=$("#hrEmployeeTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrEmployeeList())),"Objectives"===$(this).val()&&($.fn.dataTable.isDataTable("#hrObjectivesTable")?table=$("#hrObjectivesTable").DataTable(showHrObjectivesList()):(table=$("#hrObjectivesTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrObjectivesList())),"Development Needs Overview"===$(this).val()&&($.fn.dataTable.isDataTable("#hrDevNeedsTable")?table=$("#hrDevNeedsTable").DataTable(showHrDevelopmentNeedsList()):(table=$("#hrDevNeedsTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrDevelopmentNeedsList())),"Development Needs Breakdown"===$(this).val()&&($.fn.dataTable.isDataTable("#hrDevNeedsBreakdownTable")?table=$("#hrDevNeedsBreakdownTable").DataTable(showHrDevelopmentNeedsBreakdownList()):(table=$("#hrDevNeedsBreakdownTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrDevelopmentNeedsBreakdownList())),"Feedback"===$(this).val()&&($.fn.dataTable.isDataTable("#hrFeedbackTable")?table=$("#hrFeedbackTable").DataTable(showHrFeedbackList()):(table=$("#hrFeedbackTable").DataTable({dom:"Bfrtip",buttons:[{extend:"csvHtml5",text:"Export to Excel"}]}),showHrFeedbackList()))})});