function initResizable(){$("#resizable").resizable({minWidth:300,handles:"w"})}function getNotesList(t){$.ajax({url:"http://"+getEnvironment()+"/getNotes/"+t,cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(t){lastNoteID=t.length,$.each(t,function(t,e){var a=timeStampToDateTime(new Date(e.timestamp)),o=timeStampToClassDate(e.timestamp);addNoteToList(e.id,e.providerName,e.noteDescription,a,o,e.taggedObjectiveIds,e.taggedDevelopmentNeedIds)}),0==t.length&&$("#general-notes-list").addClass("text-center").append("<h5>You have no Notes</h5>")},error:function(t,e,a){console.log("error",a),toastr.error("Sorry, there was a problem getting notes, please try again later.")}})}function updateNoteTags(t,e,a){$.ajax({url:"http://"+getEnvironment()+"/updateNotesTags/"+getADLoginID(),method:"POST",xhrFields:{withCredentials:!0},data:{noteId:t,objectiveIds:e.toString(),developmentNeedIds:a.toString()},success:function(o){toastr.success(o),$("#note-tag-text-"+t).text(addTags(e,a,"note")),setNoteTagValues(t,e,a),$("#add-tag-modal").modal("hide"),clearTagsCheckboxes()},error:function(t,e,a){$("#nav-bar-buttons").empty(),toastr.error(t.responseText)}})}function addNoteToList(t,e,a,o,i,s,n){$("#general-notes-list").prepend(notesListHTML(t,e,a,o,i,s,n))}function notesListHTML(t,e,a,o,i,s,n){return" \t\t  <li class='list-group-item filterable-note' id='note-"+t+"'> \t\t\t  <input type='hidden' class='date-filter' value='"+i+"'> \t\t\t  <input type='hidden' id='note-obj-tags-"+t+"' class='notes-obj-tag' value='"+s+"'> \t\t\t  <input type='hidden' id='note-dev-need-tags-"+t+"' class='notes-dev-need-tag' value='"+n+"'> \t  \t\t  <input type='hidden' class='notes-tag-filter notes-tag-filter-"+t+"' value='"+formatTagFilterValues(s,n)+"'>   \t\t  \t\t<div class='row'> \t\t\t\t\t<div class='col-md-6 wrap-text'><h6><b>"+e+"</b></h6></div> \t\t\t\t\t<div class='col-md-6'><h6 class='pull-right'><b>"+o+"</b></h6></div> \t\t\t\t</div> \t\t\t\t<div class='row'> \t\t\t\t\t<div class='col-md-12 wrap-text'><p>"+a+"</p></div> \t            </div> \t\t\t<div class='row'> \t\t\t\t<div class='col-md-10'><h6 class='wrap-text'>Tags: <span id=note-tag-text-"+t+">"+addTags(s,n,"note")+"</span></h6></div>     \t\t\t<div class='col-md-2'><h6 class='pull-right btn-link' style='cursor:pointer' onclick='openAddTagModalNotes("+t+")'><b>Tags</b></h6></div>     \t\t</div> \t\t  </li> \t  "}function clickSubmitNote(){var t=getADLoginID(),e=$("#note-text").val().trim(),a=getADfullName(),o=new Date;addNoteToDB(t,a,e,o),$("#note-text").val(""),$("#submit-note").prop("disabled",!0)}function showSection(t){$(".notes-div").each(function(e){$(this).fadeOut(1),$(this).hasClass(t)&&$(this).fadeIn(600)})}function initNoteDatePicker(t,e){$("#"+t+"-date-picker").datepicker({useCurrent:!0,forceParse:!1,disabled:!0,format:"dd-mm-yyyy",startDate:e,orientation:"bottom",autoclose:!0}),$("#notes-start-date, #notes-end-date").val(timeStampToClassDate(new Date))}function updateNoteEndDate(){var t=formatNoteDate($("#notes-start-date").val());t>formatNoteDate($("#notes-end-date").val())&&$("#notes-end-date").val(timeStampToClassDate(t)),$("#notes-end-date-picker").datepicker("setStartDate",t)}function openNoteFilterModal(){$("#filter-modal").modal({keyboard:!1,show:!0})}function formatNoteDate(t){var e=t.slice(0,2),a=t.slice(3,5),o=t.slice(6,10);return new Date(o+"-"+a+"-"+e)}function applyNoteDateFilter(){for(var t=[],e=formatNoteDate($("#notes-start-date").val()),a=formatNoteDate($("#notes-end-date").val()),o=e;o<=a;o=o.addDays(1))t.push(timeStampToClassDate(o));$(".date-filter").each(function(e){var a=$(this).val();jQuery.inArray(a,t)>-1?$(this).closest("li").removeClass("filteredOutByDate"):$(this).closest("li").addClass("filteredOutByDate")}),noteDateFilterApplied=!0,updateNoteFilterView()}function applyNotesTagFilter(t){0==t?clearNotesTagFilter():($(".notes-tag-filter").each(function(){$(this).val().split(" ").indexOf(t)>-1?$(this).closest("li").removeClass("filteredOutByNotesTags"):$(this).closest("li").addClass("filteredOutByNotesTags")}),notesTagFilterApplied=!0),updateNoteFilterView()}function clearNotesDateFilter(){$("#notes-start-date, #notes-end-date").val(timeStampToClassDate(new Date)),updateNoteEndDate(),$(".filterable-note").each(function(t){$(this).removeClass("filteredOutByDate")}),noteDateFilterApplied=!1,updateNoteFilterView()}function clearNotesTagFilter(){$(".notes-tag-filter").each(function(){$(this).closest("li").removeClass("filteredOutByNotesTags")}),$(".tag-filter-dropdown").selectpicker("val",0),notesTagFilterApplied=!1,updateNoteFilterView()}function clearAllNotesFilters(t){clearNotesDateFilter(),clearNotesTagFilter()}function updateNoteFilterView(){$(".filterable-note").each(function(t){var e=$(this);e.hasClass("filteredOutByDate")||e.hasClass("filteredOutByNotesTags")?e.hide():e.show()});var t="";notesTagFilterApplied||noteDateFilterApplied?(noteDateFilterApplied&&(t+="Date: "+$("#notes-start-date").val()+" to "+$("#notes-end-date").val()+"."),notesTagFilterApplied&&(t+=" Tags.")):t="No Filters Applied",$(".notes-filter-text").text(t)}function openAddTagModalNotes(t){var e=$("#note-obj-tags-"+t).val(),a=$("#note-dev-need-tags-"+t).val();updateTagCheckboxes(e,a),$("#tag-type").val("note"),openAddTagModal(t)}function setNoteTagValues(t,e,a){$("#note-obj-tags-"+t).val(e),$("#note-dev-need-tags-"+t).val(a),$(".notes-tag-filter-"+t).val(formatTagFilterValues(e,a))}$(function(){initResizable(),getTags(getADLoginID()),getNotesList(getADLoginID()),$("#notes-open").click(function(t){openNotesBar()}),$("#notes-close").click(function(t){closeNotesBar()}),$(".note-validate").on("input",function(){validateForm("note-validate","submit-note")}),$("#submit-note").click(function(){clickSubmitNote()}),initNoteDatePicker("notes-start",""),initNoteDatePicker("notes-end",new Date),$("#notes-start-date").change(function(t){updateNoteEndDate()}),$("#submit-note-date-filter").click(function(){applyNoteDateFilter()}),$("#filter-note").click(function(){openNoteFilterModal()}),$("#submit-add-tags").click(function(){clickSubmitTags()}),$("#close-tag-button, #close-tag-button-x").click(function(){clearTagsCheckboxes()}),$("#objectives-tags-checkboxes").change(function(){updateObjectivesTagsList()}),$("#development-needs-tags-checkboxes").change(function(){updateDevelopmentNeedsTagsList()}),$("#notes-tag-dropdown").on("change",function(){applyNotesTagFilter($(this).val())}),$(window).on("resize",function(){var t=$("#resizable").width();screenWidth=$(window).width(),repositionNotesBar(t,screenWidth)})});var noteTypeList=["general","objectives","competencies","feedback","development-needs","team"],competencyList=["Accountability","Business Awareness","Effective Communication","Future Orientation","Innovation and Change","Leadership","Service Excellence","Teamwork"],noteDateFilterApplied=!1,notesTagFilterApplied=!1;