function addDevelopmentNeedToDB(e,t,d,n,a){$.ajax({url:"http://"+getEnvironment()+"/addDevelopmentNeed/"+e,method:"POST",xhrFields:{withCredentials:!0},data:{title:t,description:d,category:n,dueDate:a},success:function(e){0==nextDevNeedId.length&&$("#all-dev-need").removeClass("text-center").empty();var o=nextDevelopmentNeedID();addDevelopmentNeedToList(o,t,d,n,formatDate(a),0,!1,timeStampToLongDate(new Date)),showProposedDevelopmentTab(),addTag(o,t,"dev"),toastr.success(e)},error:function(e,t,d){toastr.error(e.responseText)}})}function editDevelopmentNeedOnDB(e,t,d,n,a,o,s){$.ajax({url:"http://"+getEnvironment()+"/editDevelopmentNeed/"+e,method:"POST",xhrFields:{withCredentials:!0},data:{developmentNeedId:t,title:d,description:n,category:a,dueDate:o},success:function(e){editDevelopmentNeedOnList(t,d,n,a,o,s),editTag(t,d,"dev"),toastr.success(e)},error:function(e,t,d){toastr.error(e.responseText)}})}function editDevelopmentNeedProgressOnDB(e,t,d,n,a){$.ajax({url:"http://"+getEnvironment()+"/updateDevelopmentNeedProgress/"+e,method:"POST",xhrFields:{withCredentials:!0},data:{developmentNeedId:t,progress:d,comment:a},success:function(e){if(updateDevelopmentNeedStatusOnList(t,d),2==d){var o=""===a?getADfullName()+" has completed Development Need '"+n+"'.":getADfullName()+" has completed Development Need '"+n+"'.  A comment was added: '"+a+"'";addNoteToList(lastNoteID++,"Auto Generated",o,timeStampToDateTimeGMT(new Date),timeStampToClassDate(new Date),emptyArray,emptyArray),$("#edit-dev-need-button-"+t).remove()}toastr.success(e)},error:function(e,t,d){toastr.error(e.responseText)}})}function deleteDevelopmentNeed(e,t,d,n){$.ajax({url:"http://"+getEnvironment()+"/deleteDevelopmentNeed/"+e,method:"POST",xhrFields:{withCredentials:!0},data:{developmentNeedId:t,comment:n},success:function(e){removeDevNeedFromList(t);var a=""===n?getADfullName()+" has deleted Development Need '"+d+"'.":getADfullName()+" has deleted Development Need '"+d+"'.  A comment was added: '"+n+"'";addNoteToList(lastNoteID++,"Auto Generated",a,timeStampToDateTimeGMT(new Date),timeStampToClassDate(new Date),emptyArray,emptyArray),deleteTag(t,"development-need"),toastr.success(e)},error:function(e,t,d){toastr.error(e.responseText)}})}function openAddDevelopmentNeedModal(){$("#dev-need-modal-type").val("add"),setDevelopmentNeedModalContent("","","",categoryIDs[0],getToday(),0,0),showDevelopmentNeedModal(!0)}function openEditDevelopmentNeedModal(e){$("#dev-need-modal-type").val("edit");var t=e,d=$("#dev-need-title-"+e).text().trim(),n=$("#dev-need-text-"+e).text().trim(),a=categoryIDs[$("#dev-need-category-id-"+e).val()],o=$("#dev-need-date-"+e).text().trim(),s=$("#dev-need-status-"+e).val();o=reverseDateFormat(o),setDevelopmentNeedModalContent(t,d,n,a,o,1,s),showDevelopmentNeedModal(!0)}function addDevelopmentNeedToList(e,t,d,n,a,o,s,l){!0===s||"true"===s?$("#dev-need-archived").append(developmentNeedListHTML(e,t,d,n,a,o,s,l)):$("#all-dev-need").append(developmentNeedListHTML(e,t,d,n,a,o,s,l))}function editDevelopmentNeedOnList(e,t,d,n,a,o){$("#dev-need-title-"+e).text(t),$("#dev-need-text-"+e).text(d),$("#dev-need-category-"+e).text(categoryList[n]),$("#dev-need-category-id-"+e).val(n),$("#dev-need-date-"+e).text("").append("<h6 class='pull-right'><b>"+formatDate(a)+"</b></h6>"),$("#dev-need-status-"+e).val(o)}function clickArchiveDevNeed(e,t){$("#dev-need-is-archived-"+e).val(t),editDevNeedArchiveOnDB(e,t)}function editDevNeedArchiveOnDB(e,t){$.ajax({url:"http://"+getEnvironment()+"/toggleDevelopmentNeedArchive/"+getADLoginID(),method:"POST",xhrFields:{withCredentials:!0},data:{developmentNeedId:e},success:function(d){updateDevelopmentNeedsList(e),t||updateArchiveTabDevNeeds(),toastr.success(d)},error:function(e,t,d){toastr.error(e.responseText)}})}function updateDevelopmentNeedsList(e){var t=$("#dev-need-title-"+e).text(),d=$("#dev-need-text-"+e).text(),n=$("#dev-need-date-"+e).text(),a=($("#dev-need-category-"+e).text(),$("#dev-need-category-id-"+e).val()),o=$("#dev-need-status-"+e).val(),s=$("#dev-need-is-archived-"+e).val(),l=$("#dev-need-createdOn-"+e).text();$("#development-need-item-"+e).fadeOut(400,function(){$(this).remove()}),addDevelopmentNeedToList(e,t,d,a,n,o,s,l)}function updateDevelopmentNeedStatusOnDB(e,t,d){if("true"===$("#dev-need-is-archived-"+e).val()||1==$("#dev-need-is-archived-"+e).val()||t===parseInt($("#dev-need-status-"+e).val())||2==parseInt($("#dev-need-status-"+e).val()))return!1;if(2==t)$("#complete-id").empty().append(e),$("#complete-status").empty().append(t),$("#modal-confirmation").empty().append("Development Need"),$("#modal-alert").empty().append("Development Need"),$("#completedTitle").empty().append(d),openCompleteDevelopmentNeedModal(e,d);else{editDevelopmentNeedProgressOnDB(getADLoginID(),e,t,d,"")}}function openCompleteDevelopmentNeedModal(e,t){$("#completed-status-modal").modal({backdrop:"static",keyboard:!1,show:!0}),$("textarea").val("")}function updateDevelopmentNeedStatusOnList(e,t){switch($("#dev-need-status-"+e).val(t),parseInt(t)){case 0:$("#started-dev-need-dot-"+e).removeClass("complete"),$("#complete-dev-need-dot-"+e).removeClass("complete");break;case 1:$("#started-dev-need-dot-"+e).addClass("complete"),$("#complete-dev-need-dot-"+e).removeClass("complete");break;case 2:$("#started-dev-need-dot-"+e).addClass("complete"),$("#complete-dev-need-dot-"+e).addClass("complete"),$("textarea").val(""),$("#completed-status-modal").modal("hide")}$("#dev-need-all-tab").hasClass("active")||$("#development-need-item-"+e).fadeOut(),$("#development-need-item-"+e).removeClass("proposed started completed"),$("#development-need-item-"+e).addClass(statusList[parseInt(t)])}function updateArchiveTabDevNeeds(){$(".panel-group").each(function(){$(this).hasClass("archived-dev-item")?$(this).addClass("active in"):$(this).removeClass("active in")})}function isArchivedItem(e){return 1==e||"true"===e?"archived-dev-item":"unarchived-dev-item"}function clickDeleteDevNeed(e,t){$("#delete-id").empty().append(e),$("#modal-title-type").empty().append("Development Need"),$("#modal-type").empty().append("Development Need"),$("#modal-warning").empty().append("a Development Need"),$("#deleteTitle").empty().append(t),openDeleteDevNeedModal()}function openDeleteDevNeedModal(e,t){$("#deleteModal").modal({backdrop:"static",keyboard:!1,show:!0}),$("textarea").val("")}function removeDevNeedFromList(e){nextDevNeedId.sort(function(e,t){return e-t});var t=nextDevNeedId.indexOf(parseInt(e));t>-1&&nextDevNeedId.splice(t,1),$("#development-need-item-"+e).fadeOut(400,function(){$(this).remove()}),$("textarea").val(""),$("#deleteModal").modal("hide")}function getTimeStamp(e){$.ajax({url:"http://"+getEnvironment()+"/getdevelopmentNeeds/"+e,cache:!1,method:"GET",xhrFields:{withCredentials:!0},success:function(e){createdOn=timeStampToLongDate(e[0].timeStamp)},error:function(e,t,d){console.log("error",d),toastr.error("Sorry, there was a problem getting timeStamp data, please try again later.")}})}function developmentNeedListHTML(e,t,d,n,a,o,s,l){return"     <div class='panel-group tab-pane fade dev-need "+isArchivedItem(s)+" "+statusList[o]+" active in' id='development-need-item-"+e+"'>         <div class='panel panel-default' id='panel'> \t        <input type='hidden' id='dev-need-status-"+e+"' value='"+o+"'> \t        <input type='hidden' id='dev-need-category-id-"+e+"' value='"+n+"'>             <input type='hidden' id='dev-need-is-archived-"+e+"' value='"+s+"'>         \t<div class='panel-heading'>             \t<div class='row'>             \t\t<div class='col-sm-6'> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-6' id='dev-need-no-"+e+"'><h6><b>#"+e+"</b></h6></div> \t\t            \t\t<div class='col-sm-6' id='dev-need-date-"+e+"'><h6 class='pull-right'><b>"+a+"</b></h6></div> \t            \t\t</div> \t            \t\t<div class='row'> \t\t            \t\t<div class='col-sm-12 wrap-text' id='dev-need-title-"+e+"'>"+t+"</div> \t            \t\t</div>             \t\t</div>             \t\t<div class='col-sm-5 bs-wizard'>             \t\t\t <div class='col-xs-4 bs-wizard-step complete' id='proposed-dev-need-dot-"+e+"' onClick='updateDevelopmentNeedStatusOnDB("+e+", 0)'> \t\t\t\t\t      <div class='text-center progress-link' id='test' style='cursor:pointer'><h6>Proposed</h6></div> \t\t\t\t\t      <div  class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step "+checkComplete(o,1)+"' id='started-dev-need-dot-"+e+"' onClick='updateDevelopmentNeedStatusOnDB("+e+", 1)'> \t\t\t\t\t       <div class='text-center progress-link' style='cursor:pointer'><h6>In-Progress</h6></div> \t\t\t\t\t       <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t       <div  class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t       <div  class='bs-wizard-dot-complete' style='cursor:pointer'></div> \t\t\t\t\t     </div> \t\t\t\t\t     <div class='col-xs-4 bs-wizard-step "+checkComplete(o,2)+"' id='complete-dev-need-dot-"+e+"' onClick='updateDevelopmentNeedStatusOnDB("+e+', 2, "'+t+"\")'> \t\t\t\t\t       <div class='text-center progress-link' style='cursor:pointer'><h6>Complete</h6></div> \t\t\t\t\t       \t <div class='progress'><div class='progress-bar'></div></div> \t\t\t\t\t        <div class='bs-wizard-dot-start' style='cursor:pointer'></div> \t\t\t\t\t        <div  class='bs-wizard-dot-complete' style='cursor:pointer'></div> \t\t\t\t\t     </div>             \t\t</div>             \t\t<div class='col-sm-1 chev-height'> \t\t\t\t\t  <a data-toggle='collapse' href='#collapse-dev-need-"+e+"' class='collapsed'></a> \t\t\t\t\t</div>             \t</div>             </div>                     <div id='collapse-dev-need-"+e+"' class='panel-collapse collapse'>                     <div class='panel-body'>                     <div class='row'>                         <div class='col-md-6'>                             <h6><b>Created on: </b><span id='dev-need-createdOn-"+e+"'>"+timeStampToLongDate(l)+"</span></h6>                         </div>                        \t<div class='col-md-6' >                         \t<input type='hidden' id='dev-need-category-id-"+e+"' value='"+n+"'> \t                        <h6><b> Category: </b><span id='dev-need-category-"+e+"'>"+categoryList[n]+"</span></h6>\t                    </div>                     </div>                     <div class='row'>                         <div class='col-md-12 wrap-text'>                             <p id='dev-need-text-"+e+"'>"+d+"</p>                         </div>                     </div>                     "+devNeedsButtonsHTML(e,s,o,t)}function addEditDevNeedButton(e,t){if(2!==e&&"2"!==e){return" \t\t<div class=' col-sm-6'>         \t<button type='button' class='btn btn-block btn-default' id='edit-dev-need-button-"+t+"' onClick='openEditDevelopmentNeedModal("+t+")'>Edit</button>         </div>"}return""}function devNeedsButtonsHTML(e,t,d,n){var a="     <div class='col-md-12'> \t\t<div class='col-sm-6'>         \t<button type='button' class='btn btn-block btn-default pull-left'  onClick='clickArchiveDevNeed("+e+", true)' id='archive-dev-need'>Archive</button>         </div>"+addEditDevNeedButton(d,e)+"</div>";if(!0===t||"true"===t){return" \t\t    <div class='col-md-12'> \t\t        <div class='col-sm-6'> \t\t        \t<button type='button' class='btn btn-block btn-default pull-left'  onClick='clickArchiveDevNeed("+e+", false)' id='archive-dev-need'>Restore</button> \t\t        </div>                 <div class=' col-sm-6'>                     <button type='button' class='btn btn-block btn-default' onClick='clickDeleteDevNeed("+e+', "'+n+"\")' id='delete-obj'>Delete</button>                 </div> \t\t    </div> \t\t"}return a}function clickSubmitDevelopmentNeed(){var e=$("#dev-need-modal-type").val(),t=getADLoginID(),d=$("#development-need-id").val(),n=$("#development-need-title").val().trim(),a=$("#development-need-text").val().trim(),o=$("#category-radio input:radio:checked").val(),s=$("#development-need-date").val().trim(),l=parseInt($("#development-need-status").val());if(checkIfPastDate(s)||checkEmpty("development-need-modal-validate",!0))return!1;"add"==e?addDevelopmentNeedToDB(t,n,a,o,s):editDevelopmentNeedOnDB(t,d,n,a,o,s,l),showDevelopmentNeedModal(!1)}$(function(){getDevelopmentNeedsList(getADLoginID()),initDatePicker("development-need",new Date),$("#add-dev-need").click(function(){openAddDevelopmentNeedModal()}),$(".development-need-modal-validate").on("input",function(){validateForm("development-need-modal-validate","submit-dev-need")}),$("#timeframe-radio").change(function(){toggleInputeDate($("#timeframe-radio input:radio:checked").val())}),$("#submit-dev-need").click(function(){clickSubmitDevelopmentNeed()}),$("#dev-need-all-tab").click(function(){$(".unarchived-dev-item").css("display","")}),$("#dev-need-proposed-tab").click(function(){$(".proposed").css({display:""})}),$("#dev-need-started-tab").click(function(){$(".started").css({display:""})}),$("#dev-need-completed-tab").click(function(){$(".completed").css({display:""})}),$("#close-dev-need, #close-dev-need-cross").on("click",function(e){clickCloseDevNeed(e)}),$("#delete").click(function(){deleteDevelopmentNeed(getADLoginID(),$("#delete-id").text(),$("#deleteTitle").text(),$("#deletingText").val())}),$("#submit-completed-status-note").click(function(){editDevelopmentNeedProgressOnDB(getADLoginID(),$("#complete-id").text(),$("#complete-status").text(),$("#completedTitle").text(),$("#completedText").val())})});